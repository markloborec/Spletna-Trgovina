<div class="equipment-page">
    <div class="equipment-header">
        <h1>Oprema</h1>
    </div>
    <div class="equipment-filters">
        <div class="filter-group">
            <label>Brand</label>
            <input type="text" [(ngModel)]="filter.brand" placeholder="Npr. TrailSafe" />
        </div>

        <div class="filter-group">
            <label>Material</label>
            <input type="text" [(ngModel)]="filter.material" placeholder="Npr. Carbon" />
        </div>

        <div class="filter-group">
            <label>Zdru≈æljivost</label>
            <select [(ngModel)]="filter.compatibility">
                <option value="">Vse</option>
                <option value="MTB">MTB</option>
                <option value="Road">Road</option>
                <option value="City">City</option>
                <option value="Gravel">Gravel</option>
            </select>
        </div>

        <div class="filter-group">
            <label>Razpolo≈æljivost</label>
            <select [(ngModel)]="filter.availability">
                <option value="">Vse</option>
                <option value="available">Na zalogi</option>
                <option value="unavailable">Ni na zalogi</option>
            </select>
        </div>

        <div class="filter-group">
            <label>Sortiraj</label>
            <select [(ngModel)]="sortBy">
                <option value="name">Ime</option>
                <option value="price">Cena</option>
                <option value="weight">Te≈æa</option>
            </select>
        </div>

        <div class="filter-group filter-group-button">
            <label>&nbsp;</label>
            <button class="sort-dir" (click)="sortDirection = sortDirection === 'asc' ? 'desc' : 'asc'">
                {{ sortDirection === 'asc' ? '‚¨Ü Nara≈°ƒçajoƒçe' : '‚¨á Padajoƒçe' }}
            </button>
        </div>
    </div>

    <div class="equipment-grid">
        <div class="equipment-card" *ngFor="let item of filteredAndSortedEquipments">
            <div class="equipment-image-wrapper">
                <img *ngIf="item.imageUrl" [src]="item.imageUrl" class="equipment-image" [alt]="item.name"
                    loading="lazy" (error)="onImageError(item)" />

                <div class="equipment-image-placeholder" *ngIf="!item.imageUrl">
                    <span class="placeholder-icon">üõ†Ô∏è</span>
                    <span class="placeholder-name">{{ item.name }}</span>
                </div>

                <span class="badge badge-unavailable" *ngIf="!item.isAvailable">Ni na zalogi</span>
            </div>

            <div class="equipment-info">

                <div class="equipment-name">{{ item.name }}</div>

                <div class="equipment-description">{{ item.description }}</div>

                <div class="equipment-specs">
                    <div class="spec">
                        <span class="label">Zdru≈æljivost</span>
                        <span class="value">{{ item.compatibility.join(', ') }}</span>
                    </div>

                    <div class="spec" *ngIf="item.weight">
                        <span class="label">Te≈æa</span>
                        <span class="value">{{ item.weight }} g</span>
                    </div>

                    <div class="spec" *ngIf="item.material">
                        <span class="label">Material</span>
                        <span class="value">{{ item.material }}</span>
                    </div>

                    <div class="spec" *ngIf="item.brand">
                        <span class="label">Znamka</span>
                        <span class="value">{{ item.brand }}</span>
                    </div>

                    <div class="spec">
                        <span class="label">Garancija</span>
                        <span class="value">{{ item.warrantyMonths }} mesecev</span>
                    </div>
                </div>

                <div class="equipment-bottom">
                    <div class="equipment-price">
                        {{ item.price | currency:'EUR':'symbol':'1.2-2':'sl-SI' }}
                    </div>

                    <div class="actions">
                        <button class="add-to-cart" [disabled]="!item.isAvailable">
                            {{ item.isAvailable ? 'Dodaj v ko≈°arico' : 'Obvesti me' }}
                        </button>

                        <a *ngIf="item.officialProductSite" class="official-link" [href]="item.officialProductSite"
                            target="_blank" rel="noopener noreferrer">
                            Uradna stran
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>